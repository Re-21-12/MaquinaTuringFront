import{a as de}from"./chunk-ZEJIPSPX.js";import{a as Te,d as Pe,e as we,f as ke,g as M}from"./chunk-2NTHAA6U.js";import{b as fe,d as ge,e as ve,f as Me,g as xe,i as O,k as Ce,l as be,m as ye,n as Ee,w as Se,x as Ie}from"./chunk-D4I6RR77.js";import{a as Z}from"./chunk-HLIJYPCT.js";import{D as v,E as ue,F as me,N as pe,O as _e,c as ce,g as k,h as U,i as he,q as A,u as $}from"./chunk-UKYACQUO.js";import{h as re,j as le}from"./chunk-JTWP7N5S.js";import{$ as C,Cb as ae,Eb as h,Gb as j,Rb as r,Sb as oe,Ta as c,Tb as u,Ua as d,Ub as V,Vb as q,Wb as W,Xb as w,Yb as se,_ as X,ba as ee,da as L,ea as H,ga as te,h as Q,ha as b,ia as N,ib as z,mb as ne,n as x,na as ie,nb as E,p as Y,pb as S,rb as D,sb as I,ub as T,vb as P,wb as s,xa as y,xb as o,yb as g,za as B}from"./chunk-M7DIKWBA.js";var Ae=he({passive:!0}),Fe=(()=>{class n{constructor(e,t){this._platform=e,this._ngZone=t,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Y;let t=$(e),i=this._monitoredElements.get(t);if(i)return i.subject;let l=new x,m="cdk-text-field-autofilled",p=_=>{_.animationName==="cdk-text-field-autofill-start"&&!t.classList.contains(m)?(t.classList.add(m),this._ngZone.run(()=>l.next({target:_.target,isAutofilled:!0}))):_.animationName==="cdk-text-field-autofill-end"&&t.classList.contains(m)&&(t.classList.remove(m),this._ngZone.run(()=>l.next({target:_.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{t.addEventListener("animationstart",p,Ae),t.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(t,{subject:l,unlisten:()=>{t.removeEventListener("animationstart",p,Ae)}}),l}stopMonitoring(e){let t=$(e),i=this._monitoredElements.get(t);i&&(i.unlisten(),i.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}ngOnDestroy(){this._monitoredElements.forEach((e,t)=>this.stopMonitoring(t))}static{this.\u0275fac=function(t){return new(t||n)(L(k),L(y))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Re=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=b({type:n})}static{this.\u0275inj=C({})}}return n})();var Ve=new ee("MAT_INPUT_VALUE_ACCESSOR"),qe=["button","checkbox","file","hidden","image","radio","range","reset","submit"],We=0,Le=(()=>{class n{get disabled(){return this._disabled}set disabled(e){this._disabled=A(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(ge.required)??!1}set required(e){this._required=A(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&U().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=A(e)}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,t,i,l,m,p,_,Be,K,G){this._elementRef=e,this._platform=t,this.ngControl=i,this._autofillMonitor=Be,this._ngZone=K,this._formField=G,this._uid=`mat-input-${We++}`,this._webkitBlinkWheelListenerAttached=!1,this.focused=!1,this.stateChanges=new x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(R=>U().has(R)),this._iOSKeyupListener=R=>{let f=R.target;!f.value&&f.selectionStart===0&&f.selectionEnd===0&&(f.setSelectionRange(1,1),f.setSelectionRange(0,0))},this._webkitBlinkWheelListener=()=>{};let F=this._elementRef.nativeElement,J=F.nodeName.toLowerCase();this._inputValueAccessor=_||F,this._previousNativeValue=this.value,this.id=this.id,t.IOS&&K.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new ue(p,i,m,l,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=J==="select",this._isTextarea=J==="textarea",this._isInFormField=!!G,this._isNativeSelect&&(this.controlType=F.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let t=this._elementRef.nativeElement;this._previousPlaceholder=e,e?t.setAttribute("placeholder",e):t.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){qe.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}else return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&this._type!=="number"&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}static{this.\u0275fac=function(t){return new(t||n)(d(B),d(k),d(ve,10),d(O,8),d(Ee,8),d(me),d(Ve,10),d(Fe),d(y),d(we,8))}}static{this.\u0275dir=N({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(t,i){t&1&&h("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),t&2&&(ae("id",i.id)("disabled",i.disabled)("required",i.required),ne("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),S("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[w([{provide:Pe,useExisting:n}]),ie]})}}return n})(),He=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=b({type:n})}static{this.\u0275inj=C({imports:[v,M,M,Re,v]})}}return n})();function Ue(n,a){}function $e(n,a){if(n&1&&r(0),n&2){let e=j().$implicit;u(" ",e," ")}}function Ke(n,a){if(n&1&&(s(0,"span"),z(1,Ue,0,0)(2,$e,1,1),o()),n&2){let e=a.$implicit,t=a.$index,i=j();S("head",t===i.headPosition)("accepted",i.isAccepted&&t===i.tape.length-1),c(),D(e==="null"?1:2)}}function Ge(n,a){if(n&1&&(s(0,"li"),r(1),o()),n&2){let e=a.$implicit;c(),u(" ",e," ")}}function Je(n,a){n&1&&(s(0,"mat-icon",12),r(1,"whatshot"),o()),n&2&&E("ngClass","text-teal-500")}function Qe(n,a){n&1&&(s(0,"mat-icon",12),r(1,"flash_off"),o()),n&2&&E("ngClass","text-orange-600")}function Ye(n,a){if(n&1&&(s(0,"li"),r(1),o()),n&2){let e=a.$implicit;c(),u(" ",e.replace(" "," -> ")," ")}}var Ne=class n{route=H(de);turingMachineService=H(Z);id;turing_machine;tape=[];headPosition=0;currentState="";resultMessage="";isAccepted=!1;transitionRules=[];executeMachine;turingMachines;nullSize=30;ngOnInit(){this.id=this.route.snapshot.params.id,this.getMachineById(this.id)}getMachineById(a){return Q(this,null,function*(){let e=localStorage.getItem("turingMachines");e?(this.turingMachines=JSON.parse(e),this.turingMachines.forEach(t=>{console.log("Se obtuvo la m\xE1quina de Turing desde localStorage",t),t.id==a&&(console.log("Se obtuvo la m\xE1quina de Turing desde localStorage",t),this.turing_machine=t)}),console.log("Se obtuvo la m\xE1quina de Turing desde localStorage",this.turing_machine),this.initializeTapeAndTransitions()):this.turingMachineService.getTuringMachine(a).subscribe({next:t=>{console.log("Se obtuvo la m\xE1quina de Turing desde el servicio",t),this.turing_machine=t,localStorage.setItem(`turingMachine_${a}`,JSON.stringify(t)),this.initializeTapeAndTransitions()},error:t=>{console.error("Error al obtener la m\xE1quina de Turing:",t)}})})}findFirstIndexTape(a){console.log(a);for(let e of a)if(e.length==1)return console.log(a.indexOf(e)),a.indexOf(e);return console.log(0),0}initializeTapeAndTransitions(){this.tape=new Array(this.nullSize).fill("null");let a=this.turing_machine.alfabetoCinta;console.log("S\xEDmbolos de entrada:",a);let e=this.tape.splice(0,a.length,...new Array(this.nullSize).fill("null").concat(a.split("")));this.headPosition=this.findFirstIndexTape(this.tape),this.currentState=this.turing_machine.estados.split(",")[0].trim(),this.transitionRules=this.parseTransitions(this.turing_machine.transiciones),this.isAccepted=!1,this.resultMessage=""}parseTransitions(a){return a.split(",").map(e=>{let[t,i,l,m,p]=e.trim().split(" ");return{fromState:t,read:i,toState:l,write:m,direction:p}})}step(){let a=this.tape[this.headPosition],e=this.transitionRules.find(t=>t.fromState===this.currentState&&t.read===a);if(console.log("Estado actual:",this.currentState),console.log("S\xEDmbolo actual:",a),console.log("Transici\xF3n encontrada:",e),e){switch(this.tape[this.headPosition]=e.write,this.currentState=e.toState,e.direction){case"R":this.headPosition++;break;case"L":this.headPosition--;break;case"S":break;default:console.error("Direcci\xF3n no v\xE1lida:",e.direction)}this.headPosition=Math.max(0,Math.min(this.tape.length-1,this.headPosition))}this.checkAcceptance()}run(){let a=1e3,e=0;for(;!this.isAccepted&&this.headPosition>=0&&this.headPosition<this.tape.length&&e<a;){let t=this.tape[this.headPosition];if(!this.transitionRules.find(l=>l.fromState===this.currentState&&l.read===t)){this.resultMessage="No hay m\xE1s transiciones disponibles.";break}this.step(),e++}e>=a&&(this.resultMessage="Se alcanz\xF3 el l\xEDmite m\xE1ximo de pasos.")}checkAcceptance(){this.turing_machine.estadosFinales.split(",").map(e=>e.trim()).includes(this.currentState)?(this.isAccepted=!0,this.resultMessage="Cadena aceptada."):(this.headPosition<0||this.headPosition>=this.tape.length)&&(this.resultMessage="Cadena rechazada.")}reset(){this.initializeTapeAndTransitions()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=te({type:n,selectors:[["app-execute-machine"]],standalone:!0,features:[w([Z]),se],decls:72,vars:10,consts:[[1,"turing-machine","bg-white","rounded-md"],[1,"visualization-area"],[1,"tape","flex","flex-wrap"],[3,"head","accepted"],[1,"head","text-center"],[1,"controls","flex","justify-evenly"],[3,"click"],[1,"simulation-info","flex","justify-between","gap-4"],[1,"w-1/3"],["type","text","matInput","","placeholder","Cadena a evaluar","name","alfabetoCinta",3,"ngModelChange","ngModel"],["type","number","matInput","","placeholder","Cantidad de nulos","name","alfabetoCinta",3,"ngModelChange","ngModel"],[1,"bg-gray-200","p-4","rounded-md","shadow-md"],[3,"ngClass"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),T(3,Ke,3,5,"span",3,I),o(),s(5,"div",4),r(6),o()(),s(7,"div",5)(8,"button",6),h("click",function(){return t.step()}),r(9,"Paso"),o(),s(10,"button",6),h("click",function(){return t.run()}),r(11,"Ejecutar hasta el final"),o(),s(12,"button",6),h("click",function(){return t.reset()}),r(13,"Reiniciar"),o()(),s(14,"div",7)(15,"div",8)(16,"mat-label")(17,"b"),r(18,"Alfabeto de la cinta \u2308"),o()(),s(19,"form")(20,"mat-form-field")(21,"input",9),W("ngModelChange",function(l){return q(t.turing_machine.alfabetoCinta,l)||(t.turing_machine.alfabetoCinta=l),l}),h("ngModelChange",function(){return t.initializeTapeAndTransitions()}),o()()(),s(22,"mat-label")(23,"b"),r(24,"Cantidad Nulos b"),o()(),s(25,"form")(26,"mat-form-field")(27,"input",10),W("ngModelChange",function(l){return q(t.nullSize,l)||(t.nullSize=l),l}),h("ngModelChange",function(){return t.initializeTapeAndTransitions()}),o()()(),s(28,"b"),r(29,"Alfabeto de Entrada \u03A3"),o(),s(30,"p"),r(31),o()(),s(32,"div",8)(33,"b"),r(34,"Estados Q"),o(),g(35,"hr"),s(36,"ul"),T(37,Ge,2,1,"li",null,I),o(),g(39,"hr"),s(40,"p")(41,"b"),r(42,"Estado Actual Q"),o(),r(43),o(),g(44,"hr"),s(45,"p")(46,"b"),r(47,"Estado Inicial q0"),o(),r(48,"q0"),o(),g(49,"hr"),s(50,"p")(51,"b"),r(52,"Estados finales \u03BB"),o(),r(53),o()(),s(54,"div",8)(55,"p")(56,"b"),r(57,"Posici\xF3n del Cabezal"),o(),r(58),o(),s(59,"b"),r(60,"Resultado"),o(),s(61,"p",11)(62,"b",12),r(63),z(64,Je,2,1,"mat-icon",12)(65,Qe,2,1,"mat-icon",12),o()(),s(66,"p")(67,"b"),r(68,"Transiciones \u03B4"),o()(),s(69,"ul"),T(70,Ye,2,1,"li",null,I),o()()()()),e&2&&(c(3),P(t.tape),c(3),u("Cabezal: ",t.currentState,""),c(15),V("ngModel",t.turing_machine.alfabetoCinta),c(6),V("ngModel",t.nullSize),c(4),oe(t.turing_machine.alfabetoEntrada),c(6),P(t.turing_machine.estados.split(",")),c(6),u(" ",t.currentState,""),c(10),u(" ",t.turing_machine.estadosFinales,""),c(5),u(" ",t.headPosition,""),c(4),E("ngClass",t.isAccepted?"text-teal-500":"text-orange-600"),c(),u(" ",t.resultMessage," "),c(),D(t.isAccepted?64:65),c(6),P(t.turing_machine.transiciones.split(",")))},dependencies:[ce,_e,pe,Ie,be,fe,ye,Me,xe,Se,Ce,O,M,ke,Te,He,Le,v,le,re],styles:[".turing-machine[_ngcontent-%COMP%]{font-family:Victor Mono;padding:20px}.turing-machine[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .turing-machine[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .turing-machine[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Victor Mono;color:#2c3e50}.turing-machine[_ngcontent-%COMP%]   .visualization-area[_ngcontent-%COMP%]{margin-bottom:20px}.turing-machine[_ngcontent-%COMP%]   .visualization-area[_ngcontent-%COMP%]   .tape[_ngcontent-%COMP%]{display:flex;border:4px outset #3498db;padding:10px;background-color:#f9f9f9}.turing-machine[_ngcontent-%COMP%]   .visualization-area[_ngcontent-%COMP%]   .tape[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;margin-right:2px;transition:background-color .3s}.turing-machine[_ngcontent-%COMP%]   .visualization-area[_ngcontent-%COMP%]   .tape[_ngcontent-%COMP%]   span.head[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.turing-machine[_ngcontent-%COMP%]   .visualization-area[_ngcontent-%COMP%]   .tape[_ngcontent-%COMP%]   span.accepted[_ngcontent-%COMP%]{background-color:#2ecc71}.turing-machine[_ngcontent-%COMP%]   .visualization-area[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{font-weight:700;margin-top:10px}.turing-machine[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{margin-bottom:20px}.turing-machine[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;padding:8px 12px;background-color:#3498db;color:#fff;border:none;border-radius:4px;cursor:pointer}.turing-machine[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2980b9}.turing-machine[_ngcontent-%COMP%]   .simulation-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:5px 0}.turing-machine[_ngcontent-%COMP%]   .tape[_ngcontent-%COMP%]{position:relative}.turing-machine[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{position:absolute;top:-30px;font-size:35px;color:#ff8400;transition:left .2s}"]})};export{Ne as ExecuteMachineComponent};
